{
    "$defs": {
        "search-subject-text": {
            "description": "Search for emails with a specific subject",
            "instillAcceptFormats": [
                "string"
            ],
            "instillUpstreamTypes": [
                "value",
                "reference",
                "template"
            ],
            "instillUIOrder": 3,
            "title": "Subject",
            "type": "string"
        },
        "search-from-email": {
            "description": "Search for emails from a specific email address",
            "instillAcceptFormats": [
                "string"
            ],
            "instillUpstreamTypes": [
                "value",
                "reference",
                "template"
            ],
            "instillUIOrder": 1,
            "title": "From",
            "type": "string"
        },
        "search-to-email": {
            "description": "Search for emails to a specific email address",
            "instillAcceptFormats": [
                "string"
            ],
            "instillUpstreamTypes": [
                "value",
                "reference",
                "template"
            ],
            "instillUIOrder": 2,
            "title": "To",
            "type": "string"
        }
    },
    "TASK_SEND_EMAILS": {
        "instillShortDescription": "Send an email to a recipient",
        "input": {
            "description": "Input",
            "instillUIOrder": 0,
            "properties": {
                "recipients": {
                    "description": "The email addresses of the recipients",
                    "instillAcceptFormats": [
                        "array:string"
                    ],
                    "instillUpstreamTypes": [
                        "value",
                        "reference"
                    ],
                    "items": {
                        "instillUIMultiline": false,
                        "type": "string"
                    },
                    "instillUIOrder": 0,
                    "title": "Recipient",
                    "type": "array"
                },
                "cc": {
                    "description": "The email addresses for Carbon Copy",
                    "instillAcceptFormats": [
                        "array:string"
                    ],
                    "instillUpstreamTypes": [
                        "value",
                        "reference"
                    ],
                    "items": {
                        "instillUIMultiline": false,
                        "type": "string"
                    },
                    "instillUIOrder": 1,
                    "title": "Cc",
                    "type": "array"
                },
                "bcc": {
                    "description": "The email addresses for Blind Carbon Copy",
                    "instillAcceptFormats": [
                        "array:string"
                    ],
                    "instillUpstreamTypes": [
                        "value",
                        "reference"
                    ],
                    "items": {
                        "instillUIMultiline": false,
                        "type": "string"
                    },
                    "instillUIOrder": 2,
                    "title": "Bcc",
                    "type": "array"
                },
                "subject": {
                    "description": "The subject of the email",
                    "instillAcceptFormats": [
                        "string"
                    ],
                    "instillUpstreamTypes": [
                        "value",
                        "reference",
                        "template"
                      ],
                    "instillUIOrder": 3,
                    "title": "Subject",
                    "type": "string"
                },
                "message": {
                    "description": "The message to be sent",
                    "instillAcceptFormats": [
                        "string"
                    ],
                    "instillUpstreamTypes": [
                        "value",
                        "reference",
                        "template"
                      ],
                    "instillUIMultiline": true,
                    "instillUIOrder": 4,
                    "title": "Message",
                    "type": "string"
                }
            },
            "required": [
                "recipients",
                "message"
            ],
            "title": "Input",
            "type": "object"
        },
        "output": {
            "description": "The result of sending the email",
            "instillUIOrder": 0,
            "properties": {
                "result": {
                    "description": "The result of sending the email",
                    "instillFormat": "string",
                    "instillUIOrder": 0,
                    "title": "Result",
                    "type": "string"
                }
            },
            "required": [
                "result"
            ],
            "title": "Output",
            "type": "object"
        }
    },
    "TASK_READ_EMAILS": {
        "instillShortDescription": "Read emails from a mailbox",
        "input": {
            "description": "Input",
            "instillUIOrder": 0,
            "instillEditOnNodeFields": ["search"],
            "properties": {
                "search": {
                    "description": "the search criteria for the emails",
                    "instillUIOrder": 0,
                    "oneOf": [
                            {
                                "properties": {
                                    "mailbox": {
                                        "const": "INBOX",
                                        "type": "string",
                                        "default": "INBOX"
                                    },
                                    "search-subject-text": {
                                        "$ref": "#/$defs/search-subject-text"
                                    },
                                    "search-from-email": {
                                        "$ref": "#/$defs/search-from-email"
                                    },
                                    "search-to-email": {
                                        "$ref": "#/$defs/search-to-email"
                                    }
                                },
                                "required": [
                                    "mailbox"
                                ],
                                "instillEditOnNodeFields": [
                                    "mailbox",
                                    "search-subject-text",
                                    "search-from-email",
                                    "search-to-email"
                                ],
                                "type": "object"
                            },
                            {
                                "properties": {
                                    "mailbox": {
                                        "const": "SENT",
                                        "type": "string",
                                        "default": "[Gmail]/Sent Mail"
                                    },
                                    "search-subject-text": {
                                        "$ref": "#/$defs/search-subject-text"
                                    },
                                    "search-from-email": {
                                        "$ref": "#/$defs/search-from-email"
                                    },
                                    "search-to-email": {
                                        "$ref": "#/$defs/search-to-email"
                                    }
                                },
                                "required": [
                                    "mailbox"
                                ],
                                "instillEditOnNodeFields": [
                                    "mailbox",
                                    "search-subject-text",
                                    "search-from-email",
                                    "search-to-email"
                                ],
                                "type": "object"
                            },
                            {
                                "properties": {
                                    "mailbox": {
                                        "const": "DRAFTS",
                                        "type": "string",
                                        "default": "[Gmail]/Drafts"
                                    },
                                    "search-subject-text": {
                                        "$ref": "#/$defs/search-subject-text"
                                    },
                                    "search-from-email": {
                                        "$ref": "#/$defs/search-from-email"
                                    },
                                    "search-to-email": {
                                        "$ref": "#/$defs/search-to-email"
                                    }
                                },
                                "required": [
                                    "mailbox"
                                ],
                                "instillEditOnNodeFields": [
                                    "mailbox",
                                    "search-subject-text",
                                    "search-from-email",
                                    "search-to-email"
                                ],
                                "type": "object"
                            }
                    ],
                    "title": "Search",
                    "required": [],
                    "type": "object"
                }
            },
            "required": [],
            "title": "Input",
            "type": "object"
        },
        "output":{
            "description": "The emails that match the search criteria",
            "instillUIOrder": 0,
            "properties": {
                "emails": {
                    "description": "The emails that match the search criteria",
                    "items": {
                        "properties": {
                            "from": {
                                "description": "The email address of the sender",
                                "instillFormat": "string",
                                "title": "From",
                                "type": "string"
                            },
                            "to": {
                                "description": "The email addresses of the recipient",
                                "instillFormat": "array:string",
                                "items": {
                                    "description": "The email address of the recipient",
                                    "type": "string"
                                },
                                "title": "To",
                                "type": "string"
                            },
                            "subject": {
                                "description": "The subject of the email",
                                "instillFormat": "string",
                                "title": "Subject",
                                "type": "string"
                            },
                            "message": {
                                "description": "The message of the email",
                                "instillFormat": "string",
                                "title": "Message",
                                "type": "string"
                            }
                        },
                        "required": [
                            "from",
                            "message"
                        ],
                        "type": "object"
                    },
                    "title": "Emails",
                    "type": "array"
                }
            },
            "required": [
                "emails"
            ],
            "title": "Output",
            "type": "object"
        }
    }
}